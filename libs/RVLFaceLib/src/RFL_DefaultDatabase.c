#define KEEP_OLD_NULL

#include <internal/RFLi_LibConfig.h>

#include <RVLFaceLib.h>
#include <RVLFaceLibInternal.h>

#include <internal/RFLi_Debug.h>

static const u8 scDefaultData[RFL_DEFAULT_DATA_MAX][sizeof(RFLiCharData)] = {
    /* GUEST A */
    {
        0x00, 0x08, 0x00, 0x6E, 0x00, 0x6F, 0x00, 0x20, 0x00, 0x6E, 0x00,
        0x61, 0x00, 0x6D, 0x00, 0x65, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x40, 0x40, 0x80, 0x00, 0x00, 0x00, 0xEC, 0xFF, 0x82, 0xD2, 0x10,
        0x04, 0x88, 0x00, 0x31, 0x80, 0x08, 0xA2, 0x08, 0x8C, 0x08, 0x58,
        0x14, 0x4A, 0xB8, 0x8D, 0x00, 0x8A, 0x00, 0x8A, 0x25, 0x04, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    },
    /* GUEST B */
    {
        0x00, 0x0A, 0x00, 0x6E, 0x00, 0x6F, 0x00, 0x20, 0x00, 0x6E, 0x00,
        0x61, 0x00, 0x6D, 0x00, 0x65, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x40, 0x40, 0x80, 0x00, 0x00, 0x01, 0xEC, 0xFF, 0x82, 0xD2, 0x00,
        0x04, 0x6F, 0x80, 0x31, 0x80, 0xC8, 0xA2, 0x08, 0x8C, 0x88, 0x58,
        0x14, 0x4A, 0xB8, 0x8D, 0x00, 0x8A, 0x00, 0x8A, 0x25, 0x04, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    },
    /* GUEST C */
    {
        0x00, 0x00, 0x00, 0x6E, 0x00, 0x6F, 0x00, 0x20, 0x00, 0x6E, 0x00,
        0x61, 0x00, 0x6D, 0x00, 0x65, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x40, 0x40, 0x80, 0x00, 0x00, 0x02, 0xEC, 0xFF, 0x82, 0xD2, 0x04,
        0x04, 0x42, 0x40, 0x31, 0x80, 0x28, 0xA2, 0x08, 0x8C, 0x08, 0x58,
        0x14, 0x4A, 0xB8, 0x8D, 0x00, 0x8A, 0x00, 0x8A, 0x25, 0x04, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    },
    /* GUEST D */
    {
        0x40, 0x04, 0x00, 0x6E, 0x00, 0x6F, 0x00, 0x20, 0x00, 0x6E, 0x00,
        0x61, 0x00, 0x6D, 0x00, 0x65, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x40, 0x40, 0x80, 0x00, 0x00, 0x03, 0xEC, 0xFF, 0x82, 0xD2, 0x08,
        0x04, 0x30, 0x00, 0x01, 0x80, 0x08, 0xA2, 0x10, 0x6C, 0x08, 0x58,
        0x14, 0x4A, 0xB8, 0x8D, 0x00, 0x8A, 0x00, 0x8A, 0x25, 0x04, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    },
    /* GUEST E */
    {
        0x40, 0x0C, 0x00, 0x6E, 0x00, 0x6F, 0x00, 0x20, 0x00, 0x6E, 0x00,
        0x61, 0x00, 0x6D, 0x00, 0x65, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x40, 0x40, 0x80, 0x00, 0x00, 0x04, 0xEC, 0xFF, 0x82, 0xD2, 0x00,
        0x04, 0x1D, 0xC0, 0x01, 0x80, 0xE8, 0xA2, 0x10, 0x6C, 0xA8, 0x58,
        0x14, 0x4A, 0xB8, 0x8D, 0x00, 0x8A, 0x00, 0x8A, 0x25, 0x04, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    },
    /* GUEST F */
    {
        0x40, 0x0E, 0x00, 0x6E, 0x00, 0x6F, 0x00, 0x20, 0x00, 0x6E, 0x00,
        0x61, 0x00, 0x6D, 0x00, 0x65, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x40, 0x40, 0x80, 0x00, 0x00, 0x05, 0xEC, 0xFF, 0x82, 0xD2, 0x00,
        0x04, 0x18, 0x40, 0x01, 0x80, 0x28, 0xA2, 0x10, 0x6C, 0x08, 0x58,
        0x14, 0x4A, 0xB8, 0x8D, 0x00, 0x8A, 0x00, 0x8A, 0x25, 0x04, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    }
};

RFLiCharData* RFLiGetDefaultDataPtr(u16 index) {
    RFLi_ASSERTLINE_RANGE(index, 0, RFL_DEFAULT_DATA_MAX, 152);
    if (index >= RFL_DEFAULT_DATA_MAX) {
        return NULL;
    }
    else {
        return (RFLiCharData*)scDefaultData[index];
    }
}

void RFLiGetDefaultData(RFLiCharInfo* info, u16 index) {
    RFLi_ASSERTLINE_NULL(info, 172);
    RFLi_ASSERTLINE_RANGE(index, 0, RFL_DEFAULT_DATA_MAX, 173);

    RFLiConvertRaw2Info((RFLiCharData*)scDefaultData[index], info);
}

int RFLSearchDefaultData(const RFLCreateID* id, u16* index) {
    int ret = FALSE;
    u16 i;

    RFLi_ASSERTLINE_NULL(id, 194);
    if (id == NULL) {
        return FALSE;
    }
    
    for (i = 0; i < RFL_DEFAULT_DATA_MAX; i++) {
        if (RFLiIsSameID((RFLCreateID*)&((RFLiCharData*)scDefaultData[i])->createID, id)) {
            ret = TRUE;
            break;
        }
    }

    if (ret == TRUE && index != NULL) {
        *index = i;
    }

    return ret;
}
